# 图像处理

## 白平衡

### 重要概念

黑体：

色温：

普朗克轨迹：

固有色：

色彩恒常性：

### 自动白平衡(AWB)

#### 灰度世界算法

假定世界是灰色的，图像画面RGB各通道的平均值应该是相等的，以此出发计算RGB各通道的增益因子。具体过程：

1. 计算图像的RGB各通道的平均值：Ravg, Gavg, Bavg
2. 计算图像的RGB各通道的平均值的平均值：Gray = (Ravg + Gavg + Bavg)/3
3. 计算RGB各通道的增益因子：Rgain = Gray / Ravg, Ggain = Gray / Gavg, Bgain = Gray / Bavg
4. 图像各像素的RGB值分别与各通道增益因子相乘，得到白平衡后的图像像素值

以上第4步后，有可能出现像素值溢出255的情况，一般有2种处理方法：

1. 截断，超出255的数值全部截断为255
2. 计算输出后的像素最大值，然后线性映射到[0, 255]范围内
一般情况下，第1种的画质更好，第2种方法会导致图像整体偏暗。

#### 完美反射算法
#### 动态阈值算法

## 去噪

高斯滤波
双边滤波
导向滤波
NonLocalMeans
BM3D
选择性模糊滤波

## 锐化

USM锐化
拉普拉斯锐化
